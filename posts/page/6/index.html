<!DOCTYPE html>
<html lang="zh" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | HHFCodeRv</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - HHFCodeRv">
<meta name="author" content="haohongfan">
<link rel="canonical" href="https://georgehao.github.io/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://georgehao.github.io/images/icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://georgehao.github.io/images/icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://georgehao.github.io/images/icon.png">
<link rel="apple-touch-icon" href="https://georgehao.github.io/images/icon.png">
<link rel="mask-icon" href="https://georgehao.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://georgehao.github.io/posts/index.xml" title="rss">
<link rel="alternate" hreflang="zh" href="https://georgehao.github.io/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="https://georgehao.github.io/posts/">
  <meta property="og:site_name" content="HHFCodeRv">
  <meta property="og:title" content="Posts">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Posts">
<meta name="twitter:description" content="">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://georgehao.github.io/posts/"
    }
  ]
}
</script>
</head>
<body class="list" id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://georgehao.github.io/" accesskey="h" title="HHFCodeRv (Alt + H)">
                <img src="https://georgehao.github.io/images/icon.png" alt="" aria-label="logo"
                    height="35">HHFCodeRv</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://georgehao.github.io/posts/" title="文章">
                    <span class="active">文章</span>
                </a>
            </li>
            <li>
                <a href="https://gohandbook1.haohongfan.com" title="Go 源码分析与实战">
                    <span>Go 源码分析与实战</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://georgehao.github.io/archive/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://georgehao.github.io/friends/friends/" title="好友推荐">
                    <span>好友推荐</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://georgehao.github.io/">主页</a></div>
  <h1>
    Posts
    <a href="/posts/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Compose Transporter -- 基于阿里云MongoDB和ES之间的数据同步
    </h2>
  </header>
  <div class="entry-content">
    <p>工具选型 主要查看这篇文章
mongo-connector elasticsearch-river-mongodb Logstash transporter Mongoosastic mongo-connector是mongodb-labs官方的开源项目. 但是官方不在支持, 关闭了issue, 导致很多问题无法找到答案, 也就无法解决遇到的问题
mongo-connector is not currently supported by MongoDB, Inc. If any community members would like to take over maintenance, please contact seth.payne@mongodb.com`
elasticsearch-river-mongodb不支持elasticsearch5.0以版本.
最终选择Transporter.
选择Transporter原因 项目活跃度较高 实时同步 配置简单 golang写的(golang忠实粉丝) IBM公司产品 开头文章提到的问题:
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-06-13 21:59:26 +0800 CST'>2018年6月13日</span>&nbsp;·&nbsp;<span>4 分钟</span>&nbsp;·&nbsp;<span>1799 字</span>&nbsp;·&nbsp;<span>GeorgeHao</span></footer>
  <a class="entry-link" aria-label="post link to Compose Transporter -- 基于阿里云MongoDB和ES之间的数据同步" href="https://georgehao.github.io/posts/2018-06-13-compose-transporter/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">go 跨平台编译
    </h2>
  </header>
  <div class="entry-content">
    <p>Go编译支持的平台类型 amd64 (also known as x86-64) 386 (x86 or x86-32) arm (ARM) arm64 (AArch64) version &gt;= 1.5 ppc64, ppc64le version &gt;= 1.5 mips, mipsle (32-bit MIPS big- and little-endian) version &gt;= 1.8 mips64, mips64le (64-bit MIPS big- and little-endian) version &gt;= 1.6 s390x (IBM System z) version &gt;= 1.7 $GOOS $GOARCH android arm darwin 386 darwin amd64 darwin arm darwin arm64 dragonfly amd64 freebsd 386 freebsd amd64 freebsd arm linux 386 linux amd64 linux arm linux arm64 linux ppc64 linux ppc64le linux mips linux mipsle linux mips64 linux mips64le linux s390x netbsd 386 netbsd amd64 netbsd arm openbsd 386 openbsd amd64 openbsd arm plan9 386 plan9 amd64 solaris amd64 windows 386 windows amd64 源码安装go 需要安装软件 apt-get install gcc git bzip2 note 想要go支持cgo, c编译器(比如: gcc, clang)必须先安装. 如果不安装cgo, 必须设置CGO_ENABLED=0.
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-05-04 05:30:16 +0000 +0000'>2018年5月4日</span>&nbsp;·&nbsp;<span>2 分钟</span>&nbsp;·&nbsp;<span>808 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to go 跨平台编译" href="https://georgehao.github.io/posts/2018-05-04-go-cross-complie/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Golang interface入门
    </h2>
  </header>
  <div class="entry-content">
    <p>定义 Interface是定义一组方法的集合
如何实现接口 任何type只要实现了interface的所有方法, 即可实现接口. 不需要像java需要使用implements关键字来显式声明.
所有的类型都实现了empty interfa1ce
type I interface { M() } type T struct { S string } // T就实现了interface I, 不需要显式声明 func (t T) M() { fmt.Println(t.S) } func main() { var i I = T{&#34;hello&#34;} i.M() } Interface本质 interface本质是一个(value, type)元组. interface的value是有一个潜在的类型.
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-04-15 01:50:43 +0000 +0000'>2018年4月15日</span>&nbsp;·&nbsp;<span>3 分钟</span>&nbsp;·&nbsp;<span>1219 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to Golang interface入门" href="https://georgehao.github.io/posts/2018-04-15-golang-interface-simple/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Golang指针vs值
    </h2>
  </header>
  <div class="entry-content">
    <p>Go语言允许通过值和指针的方式来传递参数.
严格的说Go只允许通过值的方式来传递参数. 当一个变量被当做函数的参数传递, 那么这个变量一定会被复制, 然后传入被调用的函数里. 当这个变量被复制, 那么一定会重新开辟内存地址.
对于参数为值的时候:
func test(p int) { fmt.Printf(&#34;%p\n&#34;, &amp;p) // 0xc42000e250 } func main() { p := 10 fmt.Printf(&#34;%p&#34;, &amp;p) // 0xc42000e218 test(p) } 从结果可以很容易看出来, 变量p和参数p是两个完全不一样地址, 就可以很容易理解变量p被复制了一份.
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-03-24 15:58:13 +0000 +0000'>2018年3月24日</span>&nbsp;·&nbsp;<span>3 分钟</span>&nbsp;·&nbsp;<span>1273 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to Golang指针vs值" href="https://georgehao.github.io/posts/2018-03-24-golang-pointer-vs-value-vs-reference/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Golang命名规范
    </h2>
  </header>
  <div class="entry-content">
    <p>文件名 没有明确的规定 根据test文件的命名规范推测, 还是使用下划线比较统一. 测试文件: path_test.go 版本区分: trap_windows_1.4.go 平台区分: file_windows.go CPU区分: vdso_linux_amd64.go 由于没有明确的文档说这个事情. 从源码来看, 我觉得&lt;a href=&#34;https://studygolang.com/articles/8542&#34;&gt;这篇文档归档的挺不错. 以后发现有别的规定再补充.
包名 尽量短, 尽量简洁, 容易记(short, concise, evocative). 因为别人会用你的package.
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-01-23 15:34:24 +0000 +0000'>2018年1月23日</span>&nbsp;·&nbsp;<span>3 分钟</span>&nbsp;·&nbsp;<span>1111 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to Golang命名规范" href="https://georgehao.github.io/posts/2018-01-23-golang_named/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">使用阿里云OSS &#43; CDN遇到的问题及解决方式
    </h2>
  </header>
  <div class="entry-content">
    <p>一. OSS 配置 CDN加速 CDN(Content Delivery Network)是将源站内容分发至最接近用户的节点，使用户可就近取得所需内容，提高用户访问的响应速度和成功率. CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上
优点: 解决网络拥挤. 提高用户下载速度; 保护源服务器. 无论渗透攻击,还是DDos攻击, 攻击的都是CDN节点.
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-11-15 12:05:39 +0000 +0000'>2017年11月15日</span>&nbsp;·&nbsp;<span>5 分钟</span>&nbsp;·&nbsp;<span>2131 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to 使用阿里云OSS &#43; CDN遇到的问题及解决方式" href="https://georgehao.github.io/posts/2017-11-15-aliyun-oss-cdn/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">爬虫小试-抓取JD图片
    </h2>
  </header>
  <div class="entry-content">
    <p>因为项目需要, 要抓取京东一些图片, 来进行分析使用.如https://item.jd.com/bigimage.aspx?id=11921955
我们想抓取的就是这个图片右侧的8张图片. 进过分析这个系列html源码, 发现8张图片的地址在js数组中.
curl https://item.jd.com/bigimage.aspx?id=11921955 如果利用常规的requests &#43; BeautifulSoup的话, 感觉只获取这个js数组就是一个挺麻烦的事情. 因为直接使用requests获取到的页面, 没有动态加载js数据.
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-10-03 13:44:30 +0000 +0000'>2017年10月3日</span>&nbsp;·&nbsp;<span>2 分钟</span>&nbsp;·&nbsp;<span>924 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to 爬虫小试-抓取JD图片" href="https://georgehao.github.io/posts/2017-10-03-spider-jd/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">C&#43;&#43;实现ping
    </h2>
  </header>
  <div class="entry-content">
    <p>
最近手头有点工作跟这个有段, 就实现一个简单ping. 就实现如图功能就行.
先说下原理:
使用ICMP协议, 组织ICMP包 socket_id = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP); 告诉host我们要使用发送的报文是ICMP, 至于怎么发, 以及TCP通信的就是不是我们这里要关心的了
##组织ICMP标示
p_icmp = (struct icmp *)buffer; p_icmp-&gt;icmp_type = ICMP_ECHO; p_icmp-&gt;icmp_code = 0; p_icmp-&gt;icmp_cksum = 0; p_icmp-&gt;icmp_seq = 12345; p_icmp-&gt;icmp_id = getpid(); p_icmp-&gt;icmp_cksum = checkSum((uint16_t*)p_icmp, 64); 这里组织我们需要的ICMP的一些标示
3.发送ICMP给host
int send_chars = sendto(socket_id, (char *)buffer, 64, 0, (struct sockaddr*) &amp;to, (socklen_t) sizeof(struct sockaddr_in)); 发送ICMP包给你host
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-08-25 12:02:07 +0000 +0000'>2017年8月25日</span>&nbsp;·&nbsp;<span>1 分钟</span>&nbsp;·&nbsp;<span>304 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to C&#43;&#43;实现ping" href="https://georgehao.github.io/posts/2017-08-25-cping/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">LD_LIBRARY_PATH与-L的关系以及延伸
    </h2>
  </header>
  <div class="entry-content">
    <p>最近跟同学讨论c&#43;&#43;在编译时g&#43;&#43; -L.. 和LD_LIBRARY_PATH的问题，今天在做一个东西的时候发现，我对这两个东西的理解是错误的，经过一番研究，写下我对这些东西的想法，如果有不对的地方，欢迎指正。 我遇到的问题：
g&#43;&#43; multiple.cpp -L/usr/local/lib -lboost_program_options编译完后，ldd ./a.out发现libboost_program_options.so.1.55.0 =&gt; not found
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-08-25 11:56:24 +0000 +0000'>2017年8月25日</span>&nbsp;·&nbsp;<span>2 分钟</span>&nbsp;·&nbsp;<span>848 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to LD_LIBRARY_PATH与-L的关系以及延伸" href="https://georgehao.github.io/posts/2017-08-25-ld_library_path/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">有关LD_LIBRARY_PATH与ld.so.conf
    </h2>
  </header>
  <div class="entry-content">
    <p>我之前写过一篇关于LD_LIBRARY_PATH与gcc/g&#43;&#43; -L的关系的文章. 在用CPACK制作了一个Debian安装包，然后我在/home/.bashrc里添加了export LD_LIBRARY_PATH=/usr/loca/lib:$LD_LIBRARY_PATH, 这个不够优美, 经过一番寻找终于找到了—ld.so.conf可以完美解决这个问题。 为什么LD_LIBRARY_PATH不行？ 可以看看老外是怎么说的
升级共享库时，替换之前先测试一下类似的，升级后的某个程序可能依赖于一些动态链接库，如果你将某个链接库替换了，程序可能就无法工作了。这时候，你可以使用LD_LIBRARY_PATH指向存有备份的一个目录，然后，你可以没有顾忌地替换系统版本了。万一出错，拷贝回去就是了
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-08-25 11:55:53 +0000 +0000'>2017年8月25日</span>&nbsp;·&nbsp;<span>4 分钟</span>&nbsp;·&nbsp;<span>1699 字</span>&nbsp;·&nbsp;<span>haohongfan</span></footer>
  <a class="entry-link" aria-label="post link to 有关LD_LIBRARY_PATH与ld.so.conf" href="https://georgehao.github.io/posts/2017-08-25-id_library_path_ld_so_conf/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://georgehao.github.io/posts/page/5/">
      «&nbsp;上一页&nbsp;
    </a>
    <a class="next" href="https://georgehao.github.io/posts/page/7/">下一页&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>© 2021 <a href="https://georgehao.github.io/">haohongfan</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
